### Условие

Ваксинационен център работи на следния принцип:

• множество доктори поставят ваксини;

• има маса, на която може да има максимум M на брой ампули с ваксина;

• всеки доктор взима една ампула от масата (ако на масата има ампули) и поставя ваксината
на пациент;

• ако на масата няма ампули, докторът казва на медицинската сестра да донесе нова партида
ампули и тя “презарежда” масата с нови M на брой ампули;

• работният ден започва с “пълна” маса с M на брой ампули.
Множество паралело работещи копия на процеса $D$ (лекари) изпълняват следния код:
|$D$|
|---|
|while true:|
|getVaccineFromTable()|
|administerVaccineTo$P$atient()|

Единичен процес $N$ (мед. сестра) изпълнява следния код:

|$N$|
|---|
|while true:|
|reloadTable$W$ithVaccines(M)|


Ограничения:

• процес $D$ не може да изпълни getVaccineFromTable(), ако на масата няма ампули с ваксина;

• процес $N$ може да изпълни reloadTable$W$ithVaccines(M) само ако на масата няма ампули с
ваксина.

Осигурете чрез семафори синхронизация на процесите така, че да са изпълнени синхронизационните ограничения. Обосновете решението си.

Упътване: Освен семафори, ползвайте и брояч

### Решение


| Initialize  |
|-------------|
| Semaphore s,t,l |
| s.init(0)   |
| t.init(1)   |
| l.init(0)   |
|int cnt = 0|


| |$D$ ||
|-------------|---|---|
|while true:|||
||    t.wait()||
||    cnt++||
||    if cnt = M:
|||        s.signal()|
|||        l.wait()|
||    t.signal()||
||    getVaccineFromTable()||
||    administerVaccineTo$P$atient()||

| $N$ ||
|------|-------|
|while true:||
||    s.wait()|
||    reloadTable$W$ithVaccines(M)|
||    cnt=0|
||    l.signal()|