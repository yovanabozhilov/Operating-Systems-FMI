### Условие

Множество от $N$ паралелно работещи копия на процеса $P$ изпълняват следният
цикъл с две инструкции:

|$W$HILE true|
|$p_1$|
|$p_2$|
|E$N$D$W$HILE|

Осигурете чрез семафори и броячи синхронизация на работещите копия така, че на всяка итерация
на цикъла всички процеси се изчакват взаимно, а именно: инструкцията $p_2$ се изпълнява, след
като всички копия са изпълнили $p_1$ (на същата итерация).


### Решение


| Initialize  |
|-------------|
| Semaphore s,t,m |
| s.init(1)   |
| t.init(0)   |
| m.init(0)   |
|int cnt = 0|
|int cnt2 = 0|

|$P$||
|---|---|
|$W$HILE true||
|$p_1$||
|||
|s.wait()||
|cnt = cnt+1||
|if cnt == $N$ :||
||  t.signal()|
|s.signal()||
|t.wait()||
|t.signal()||
|$p_2$||
|||
|s.wait()||
|cnt = cnt-1||
|if cnt2 == 0 :||
||  m.signal()|
|s.signal()||
|||
|m.wait()||
|m.signal()||
|||
|E$N$D$W$HILE||
